## ☀️ **인터럽트 (Interrupt)**

> 프로세서가 현재 실행 중인 작업을 일시적으로 중단하고, 다른 긴급하거나 중요한 작업을 처리하도록 하는 메커니즘
> 
- 주로 하드웨어 장치로부터의 신호나 예외 상황을 처리하는 데 사용된다.
    - 예시) 키보드 입력, 마우스 클릭, 네트워크 패킷 수신 등

### 유형

- **하드웨어 인터럽트:** 외부 하드웨어 장치로부터 발생
- **소프트웨어 인터럽트**: 프로그램 내부의 명령 실행에 의해 발생

### 작동 방식

1. **인터럽트 발생**
    - **하드웨어 인터럽트**
        - 키보드 입력, 마우스 클릭, 네트워크 패킷 수신 등과 같은 외부 하드웨어 장치에서 발생
    - **소프트웨어 인터럽트**
        - 프로그램 내부의 명령 실행에 의해 발생
2. **인터럽트 신호 인식**
    - 프로세서는 현재 실행 중인 명령어의 처리가 끝난 후 인터럽트 신호를 확인한다.
    - 이는 프로세서가 항상 인터럽트를 즉각적으로 인식하지는 않는다는 것을 의미한다.
3. **현재 상태 저장**
    - 인터럽트가 인식되면 프로세서는 현재 실행 중인 작업(프로세스)의 상태를 저장한다.
    - 이는 나중에 다시 그 작업으로 돌아갈 수 있게 하기 위함으로, 주로 프로그램 카운터, 레지스터 값 등이 저장된다.
4. **인터럽트 서비스 루틴(ISR) 실행**
    - 프로세서는 인터럽트와 관련된 서비스 루틴 주소를 담고 있는 테이블인 `인터럽트 벡터 테이블`을 참조하여 해당 인터럽트를 처리하는 `ISR`(Interrupt Service Routine)로 제어를 이동시킨다.
    - ISR은 인터럽트를 처리하는 코드로, 인터럽트의 종류에 따라 적절한 작업을 수행한다.
5. **작업 복귀**
    - ISR 실행이 완료되면, 프로세서는 이전에 저장했던 상태를 복원하여 중단된 작업을 계속 진행한다.

### **인터럽트 고려 사항**

- **우선 순위**
    - 동시에 여러 인터럽트가 발생할 경우, 인터럽트의 우선 순위에 따라 처리 순서가 결정된다.
- **인터럽트 마스킹**
    
    특정 인터럽트를 일시적으로 무시하도록 설정할 수 있다.
    
- **중첩 인터럽트**
    
    하나의 인터럽트 처리 중 다른 인터럽트가 발생하는 것으로, 이는 인터럽트 처리의 복잡성을 증가시킨다.
    

### 인터럽트 서비스 루틴(Interrupt Service Routine, ISR)

> 인터럽트 처리를 위해 설계된 특수한 함수 또는 프로시저
> 
- 컴퓨터 시스템에서 인터럽트가 발생할 때마다 해당 인터럽트를 처리하기 위해 호출되는 코드
- 운영 체제 또는 하드웨어 제조업체에 의해 미리 정의되어 있거나 사용자에 의해 커스텀으로 정의될 수 있다.
- **자동 실행**: 인터럽트가 발생하면, 시스템은 자동으로 해당 ISR을 호출한다. 이는 일반적인 함수 호출과는 다르게, 특정 이벤트에 의해 자동으로 실행된다.
- **직접적 처리**: ISR은 발생한 인터럽트에 직접적으로 대응하는 코드를 실행한다. 이는 데이터 읽기, 상태 변경, 하드웨어 제어 등을 포함할 수 있다.

### **ISR 처리 과정**

1. **인터럽트 발생**
    - 하드웨어 또는 소프트웨어 인터럽트가 발생한다.
2. **현재 상태 저장**
    - 프로세서는 현재 실행 중인 작업의 상태를 저장한다. 이는 주로 레지스터, 프로그램 카운터 등의 정보를 포함한다.
3. **인터럽트 벡터 테이블 접근**
    - 프로세서는 인터럽트 벡터 테이블(Interrupt Vector Table)을 사용하여 해당 인터럽트에 대응하는 ISR의 주소를 찾는다.
4. **ISR 호출**
    - 프로세서는 ISR의 주소로 제어를 이동시켜 ISR을 실행한다.
5. **인터럽트 처리**
    - ISR은 인터럽트에 대한 적절한 처리를 수행한다. 이는 인터럽트의 원인 파악, 필요한 작업 수행, 하드웨어 상태 갱신 등을 포함할 수 있다.
6. **상태 복원 및 반환**
    - ISR이 완료되면, 프로세서는 이전에 저장된 상태를 복원하고 중단된 작업을 계속 진행한다.

### 인터럽트 서비스 루틴 **주의 사항**

- **실행 시간**: ISR은 가능한 한 빠르게 실행되어야 한다. ISR의 실행 시간이 길어지면 시스템의 반응 시간이 느려질 수 있다.
- **자원 사용**: ISR에서는 제한된 자원을 사용해야 하며, 일반적으로 동기화 메커니즘과 같은 복잡한 연산을 피해야 한다.
- **리엔트런시**: ISR이 중첩되어 실행될 수 있으므로, 리엔트런트(Reentrant)하게 설계되어야 한다. 즉, 중첩 인터럽트가 동시에 발생했을 때도 안전하게 실행될 수 있어야 한다.

<br>

## ☀️ **시스템 콜 (System Call)**

> 사용자 모드에서 실행 중인 프로그램이 커널 모드의 서비스를 요청할 때 사용하는 인터페이스
> 
- **인터페이스**: 시스템 콜은 사용자 프로그램과 운영 체제 커널 사이의 인터페이스 역할을 한다.
- **보안 및 안정성**: 사용자 프로그램이 직접적으로 시스템 자원에 접근하는 것을 제한하여 시스템의 보안과 안정성을 유지한다.
- **기능 제공**: 파일 작업, 네트워크 통신, 프로세스 관리 등의 운영 체제가 제공하는 서비스에 대한 접근을 안전하게 사용자 프로그램에 제공한다.

### **시스템 콜의 작동 방식**

1. **시스템 콜 요청**
    - 프로그램은 특정 기능을 수행하기 위해 시스템 콜을 호출한다. 이는 일반 함수 호출과 유사한 형태를 가진다.
2. **커널 모드 전환**
    - 시스템 콜이 호출되면, CPU는 사용자 모드에서 커널 모드로 전환된다. 이는 운영 체제 커널이 제어권을 가지게 됨을 의미한다.
3. **시스템 콜 처리**
    - 커널은 요청된 시스템 콜에 해당하는 서비스를 수행한다. 이 과정에서 커널은 필요한 시스템 자원에 접근하고, 요청된 작업을 수행한다.
4. **결과 반환 및 사용자 모드로 복귀**
    - 작업이 완료되면, 결과가 사용자 프로그램에 반환되고, CPU는 다시 사용자 모드로 전환된다.

### **시스템 콜의 예시**

- **파일 관련**: **`open()`**, **`read()`**, **`write()`**, **`close()`** 등
- **프로세스 관련**: **`fork()`**, **`exec()`**, **`wait()`**, **`exit()`** 등
- **네트워크 관련**: **`socket()`**, **`bind()`**, **`listen()`**, **`accept()`** 등

### **중요성과 고려사항**

- **효율성**: 시스템 콜은 운영 체제의 핵심 기능을 제공하기 때문에, 그 효율성과 성능은 시스템 전체의 성능에 큰 영향을 미친다.
- **보안**: 시스템 콜을 통해 운영 체제는 사용자 프로그램이 시스템 자원을 안전하게 사용하도록 관리한다.
- **호환성**: 다양한 운영 체제에서 시스템 콜은 서로 다를 수 있으며, 이는 프로그램의 이식성에 영향을 준다.

<br>

## ☀️ 인터럽트와 시스템 콜의 차이점

- **발생 원인**: 인터럽트는 대부분 하드웨어에서 발생하는 반면, 시스템 콜은 사용자 프로그램의 요청에 의해 발생한다.
- **목적과 사용**: 인터럽트는 시스템의 긴급한 이벤트에 반응하기 위해 사용되고, 시스템 콜은 운영 체제 서비스에 접근하기 위해 사용된다.
- **처리 방식**: 인터럽트는 자동으로 처리되는 반면, 시스템 콜은 명시적인 프로그램 요청에 의해 처리된다.
